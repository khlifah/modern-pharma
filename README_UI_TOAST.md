# UI Toast + Email Guide

ูุฐู ุงูุญุฒูุฉ ุชุถูู **ุชูุจููุงุช ุชุธูุฑ ุฏุงุฎู ุงูุตูุญุฉ (ุชูุณุช)** ุจุฏูู ุฃู ููุชุจุงุช ุฎุงุฑุฌูุฉุ ูุชุณุชุนูู ุฌุฏุงูู ุงูุฅุดุนุงุฑุงุช ุงูููุฌูุฏุฉ ุฃุตูุงู ูู ูุดุฑูุนู.
ููุง ูุนุชูุฏ ุงูุฅุฑุณุงู ุงูุจุฑูุฏู ุนูู ุงูุฏุงูุฉ `send_email_simple` ูู `notifications_lib.php`.

## ูุงุฐุง ุชุญุชููุ
- `ui_toast.css` ู `ui_toast.js`: ุชูุณุช ุจุณูุท ูุฌุงูุฒ.
- `ui_notifications_snippet.php`: ุฌุฒุก PHP ููุฑุฃ ุขุฎุฑ 5 ุฅุดุนุงุฑุงุช ุบูุฑ ููุฑูุกุฉ ููุนุฑุถูุง ูุชูุณุช.

## ููููุฉ ุงูุชุฑููุจ (ุฃูู ุชุบููุฑุงุช ููููุฉ):
1) ุถุน ุงููููุงุช ุงูุซูุงุซุฉ ูู ุฌุฐุฑ ูุดุฑูุนู (ุฃู ุฏุงุฎู `ููุฑุฏู2/` ูู ูุฐุง ุฌุฐุฑ ุชุทุจูู ุงูููุจ ุนูุฏู).
2) ูู ุงูุตูุญุงุช ุงูุชู ุชุฑูุฏ ุฃู ูุธูุฑ ูููุง ุงูุฅุดุนุงุฑ (ูุซู `dashboard.php` ุฃู `index.php`):
   ุฃุถูู ุงูุณุทุฑ ุงูุชุงูู ูุจู `</body>`:
   ```php
   <?php include __DIR__ . '/ui_notifications_snippet.php'; ?>
   ```
   > ูุฐุง ูุง ูุนููู ุงูุฅุดุนุงุฑุงุช ูููุฑูุก ุชููุงุฆููุง. ุงูุชุนููู ูุชู ูู ุตูุญุฉ `notifications.php`.

3) **ุงูุฅุดุนุงุฑ ุงูุจุฑูุฏู**:
   - ุนูุฏ ุฅูุดุงุก ุญุฏุซุ ุงุณุชุฏุนู `notify_event($pdo, $event_type, $title, $message, $severity, $actor_user_id, $target_table, $target_id, /* $email_to */ 'user@example.com');`
   - ุชุฃูุฏ ูู ุถุจุท `NOTIFY_FROM` ูู `file.env`.
   - ุฅู ูุงู ุฎุงุฏูู ูุง ูุฑุณู ุจุฑูุฏูุง ุนุจุฑ `mail()`ุ ุงุณุชุจุฏู ูุญุชูู `send_email_simple` ุจุชููุฆุฉ SMTP (PHPMailer) โ ุฃู ุฃุฎุจุฑูู ุฃุฌูุฒ ูู ูุณุฎุฉ SMTP.

## ููุงุญุธุงุช
- ุฅู ูู ููู ุฌุฏูู `notifications` ููุฌูุฏูุงุ ุฃูุดุฆู ุจุณูุฑุจุช SQL ุงูุฐู ุฃุฑุณูุชู ูู ุณุงุจููุงุ ุฃู ุงุณุชุฎุฏู ุงูุญุฒูุฉ ุงูุณุงุจูุฉ ุงูุชู ุชุถูู ุฅูุดุงุก ุงูุฌุฏูู ุชููุงุฆููุง.
- ูุชูุนูู ุนุฏูุงุฏ ูู ุงููุงุฆูุฉุ ููููู ุงุณุชุฎุฏุงู:
  ```php
  $st = $pdo->query("SELECT COUNT(*) FROM notifications WHERE read_at IS NULL");
  $unread = (int)$st->fetchColumn();
  echo '<a href="notifications.php">๐ ุงูุฅุดุนุงุฑุงุช '.($unread?'<span class="badge">'.$unread.'</span>':'').'</a>';
  ```
ุชุงุฑูุฎ: 2025-08-30T18:30:28.901297Z
